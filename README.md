# Каталог AISI — Мини-движок на PHP + SQLite

Простой каталог нержавеющих лент AISI с админкой для управления товарами и категориями.

## Требования

- PHP 8.0 или выше
- Встроенный веб-сервер PHP (или любой другой веб-сервер)

## Установка и запуск

1. **Создать базу данных и заполнить тестовыми данными:**

```bash
php storage/seed.php
```

Это создаст:
- Базу данных `storage/database.sqlite`
- 16 категорий AISI (201, 301, 304, 304L, 310, 310S, 316, 316L, 316Ti, 321, 409, 420, 430, 431, 441, 904L)
- По 10 товаров в категориях AISI 316L, AISI 304 и AISI 201

2. **Запустить встроенный сервер PHP:**

```bash
php -S localhost:8000 -t public public/router.php
```

3. **Открыть в браузере:**

- Главная: http://localhost:8000/ (редирект на первую категорию)
- Категория: http://localhost:8000/aisi-316l/
- Товар: http://localhost:8000/product/{slug}/
- Админка: http://localhost:8000/admin/login

## Доступ к админке

- **Логин:** `admin`
- **Пароль:** `admin123`

## Структура проекта

```
/
├── app/
│   ├── config.php          # Конфигурация (логин/пароль админа, пути)
│   ├── db.php              # Подключение к SQLite
│   ├── helpers.php         # Вспомогательные функции
│   ├── views/              # Шаблоны страниц
│   │   ├── layout.php      # Общий layout
│   │   ├── category.php    # Страница категории
│   │   ├── product.php     # Страница товара
│   │   └── 404.php         # 404 страница
│   └── admin/              # Админка
│       ├── login.php
│       ├── logout.php
│       ├── products.php
│       ├── product_edit.php
│       ├── categories.php
│       └── category_edit.php
├── public/
│   ├── router.php          # Роутер для встроенного сервера
│   ├── index.php           # Главный роутинг
│   ├── assets/
│   │   └── styles.css      # Стили
│   └── uploads/            # Загруженные изображения (создается автоматически)
└── storage/
    ├── init.sql            # SQL схема
    ├── seed.php            # Скрипт заполнения БД
    └── database.sqlite     # База данных (создается автоматически)
```

## URL структура

- `/` — редирект на первую активную категорию
- `/{category_slug}/` — страница категории (например `/aisi-316l/`)
- `/product/{product_slug}/` — страница товара
- `/admin/login` — вход в админку
- `/admin/products` — список товаров
- `/admin/product_edit` — создание/редактирование товара
- `/admin/categories` — список категорий
- `/admin/category_edit` — создание/редактирование категории

## Фильтры на странице категории

- **Толщина ленты** — чекбоксы (0.05, 0.1, 0.15, 0.2, 0.25, 0.3, 0.35, 0.4, 0.5, 0.6, 0.7 мм)
- **Состояние стали** — мягкая / нагартованная
- **Пружинные свойства** — любые / да / нет
- **Поверхность** — BA / 2B

Фильтры передаются через GET параметры:
- `th[]=0.2&th[]=0.3` — толщины
- `cond[]=soft&cond[]=hard` — состояния
- `spring=1` — пружинные свойства
- `surf[]=BA&surf[]=2B` — поверхности

## SEO и микроразметка

- **JSON-LD BreadcrumbList** на страницах категорий и товаров
- **JSON-LD Product + Offer** на страницах товаров
- SEO поля (title, description, h1) редактируются в админке

## Загрузка изображений

- Форматы: JPG, PNG, WebP
- Максимальный размер: 5MB
- Сохранение в `/public/uploads/`
- Имена файлов: `p_{id}_{timestamp}.{ext}`

## Особенности

- Без внешних библиотек/фреймворков
- Чистый PHP 8 + SQLite
- Самописный роутинг
- Простая админка с CRUD
- Адаптивный дизайн
- Микроразметка Schema.org

## Разработка

Для изменения логина/пароля админа отредактируйте `app/config.php`:

```php
'admin_user' => 'admin',
'admin_pass_hash' => password_hash('ваш_пароль', PASSWORD_DEFAULT),
```

Для пересоздания БД удалите `storage/database.sqlite` и запустите `php storage/seed.php` снова.
